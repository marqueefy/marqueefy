/*!
  * Marqueefy v1.0.2 (https://marqueefy.github.io/)
  * Copyright 2022 Neeraj Kumar Das (https://github.com/nkdas91)
  * Licensed under MIT (https://github.com/marqueefy/marqueefy.github.io/blob/master/LICENSE)  
  */
const elementMap=new Map,Data={set(t,e,n){elementMap.has(t)||elementMap.set(t,new Map);const r=elementMap.get(t);r.has(e)||0===r.size?r.set(e,n):console.error(`Marqueefy doesn't allow more than one instance per element. Bound instance: ${Array.from(r.keys())[0]}.`)},get:(t,e)=>elementMap.has(t)&&elementMap.get(t).get(e)||null,remove(t,e){if(!elementMap.has(t))return;const n=elementMap.get(t);n.delete(e),0===n.size&&elementMap.delete(t)}},toType=t=>null==t?`${t}`:Object.prototype.toString.call(t).match(/\s([a-z]+)/i)[1].toLowerCase(),isElement=t=>!(!t||"object"!=typeof t)&&void 0!==t.nodeType,getElement=t=>isElement(t)?t:"string"==typeof t&&t.length>0?document.querySelector(t):null;function normalizeData(t){if("true"===t)return!0;if("false"===t)return!1;if(t===Number(t).toString())return Number(t);if(""===t||"null"===t)return null;if("string"!=typeof t)return t;try{return JSON.parse(decodeURIComponent(t))}catch(e){return t}}function normalizeDataKey(t){return t.replace(/[A-Z]/g,(t=>`-${t.toLowerCase()}`))}const Manipulator={setDataAttribute(t,e,n){t.setAttribute(`data-mq-${normalizeDataKey(e)}`,n)},removeDataAttribute(t,e){t.removeAttribute(`data-mq-${normalizeDataKey(e)}`)},getDataAttributes(t){if(!t)return{};const e={},n=Object.keys(t.dataset).filter((t=>t.startsWith("mq")&&!t.startsWith("mqConfig")));for(const r of n){let n=r.replace(/^mq/,"");n=n.charAt(0).toLowerCase()+n.slice(1,n.length),e[n]=normalizeData(t.dataset[r])}return e},getDataAttribute:(t,e)=>normalizeData(t.getAttribute(`data-mq-${normalizeDataKey(e)}`))};class Config{static get Default(){return{}}static get DefaultType(){return{}}static get NAME(){throw new Error('You have to implement the static method "NAME", for each component!')}_getConfig(t){return t=this._mergeConfigObj(t),t=this._configAfterMerge(t),this._typeCheckConfig(t),t}_configAfterMerge(t){return t}_mergeConfigObj(t,e){const n=isElement(e)?Manipulator.getDataAttribute(e,"config"):{};return{...this.constructor.Default,..."object"==typeof n?n:{},...isElement(e)?Manipulator.getDataAttributes(e):{},..."object"==typeof t?t:{}}}_typeCheckConfig(t,e=this.constructor.DefaultType){for(const r of Object.keys(e)){const o=e[r],s=t[r],i=isElement(s)?"element":null==(n=s)?`${n}`:Object.prototype.toString.call(n).match(/\s([a-z]+)/i)[1].toLowerCase();if(!new RegExp(o).test(i))throw new TypeError(`${this.constructor.NAME.toUpperCase()}: Option "${r}" provided type "${i}" but expected type "${o}".`)}var n}}const VERSION="1.0.2";class BaseComponent extends Config{constructor(t,e){super(),(t=getElement(t))&&(this._element=t,this._config=this._getConfig(e),Data.set(this._element,this.constructor.DATA_KEY,this))}dispose(){Data.remove(this._element,this.constructor.DATA_KEY);for(const t of Object.getOwnPropertyNames(this))this[t]=null}_getConfig(t){return t=this._mergeConfigObj(t,this._element),t=this._configAfterMerge(t),this._typeCheckConfig(t),t}static getInstance(t){return Data.get(getElement(t),this.DATA_KEY)}static getOrCreateInstance(t,e={}){return this.getInstance(t)||new this(t,"object"==typeof e?e:null)}static get VERSION(){return"1.0.2"}static get DATA_KEY(){return`mq.${this.NAME}`}}const NAME="marqueefy",Default={direction:"left",speed:100},DefaultType={direction:"string",speed:"number"};class Marqueefy extends BaseComponent{constructor(t,e){super(t),this._element=t,this._config=this._getConfig(e),this.refresh()}static get NAME(){return NAME}static get Default(){return Default}static get DefaultType(){return DefaultType}refresh(){const{direction:t}=this._config,{speed:e}=this._config;this._element.setAttribute("data-mq-direction",t),this._element.setAttribute("data-mq-speed",e);let n=this._element.querySelector(".content").getBoundingClientRect().width;"top"!==t&&"bottom"!==t||(n=this._element.getBoundingClientRect().height,this._element.style.setProperty("--mq-height",n+"px")),this._element.style.setProperty("--mq-animation-duration",n/e+"s")}}export{Marqueefy};
//# sourceMappingURL=marqueefy.esm.min.js.map