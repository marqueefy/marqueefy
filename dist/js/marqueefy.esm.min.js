/*!
  * Marqueefy v1.0.3 (https://marqueefy.github.io/)
  * Copyright 2022 Neeraj Kumar Das (https://github.com/nkdas91)
  * Licensed under MIT (https://github.com/marqueefy/marqueefy.github.io/blob/master/LICENSE)  
  */
const elementMap=new Map,Data={set(e,t,n){elementMap.has(e)||elementMap.set(e,new Map);const r=elementMap.get(e);r.has(t)||0===r.size?r.set(t,n):console.error(`Marqueefy doesn't allow more than one instance per element. Bound instance: ${Array.from(r.keys())[0]}.`)},get:(e,t)=>elementMap.has(e)&&elementMap.get(e).get(t)||null,remove(e,t){if(!elementMap.has(e))return;const n=elementMap.get(e);n.delete(t),0===n.size&&elementMap.delete(e)}},toType=e=>null==e?`${e}`:Object.prototype.toString.call(e).match(/\s([a-z]+)/i)[1].toLowerCase(),isElement=e=>!(!e||"object"!=typeof e)&&void 0!==e.nodeType,getElement=e=>isElement(e)?e:"string"==typeof e&&e.length>0?document.querySelector(e):null;function normalizeData(e){if("true"===e)return!0;if("false"===e)return!1;if(e===Number(e).toString())return Number(e);if(""===e||"null"===e)return null;if("string"!=typeof e)return e;try{return JSON.parse(decodeURIComponent(e))}catch(t){return e}}function normalizeDataKey(e){return e.replace(/[A-Z]/g,(e=>`-${e.toLowerCase()}`))}const Manipulator={setDataAttribute(e,t,n){e.setAttribute(`data-mq-${normalizeDataKey(t)}`,n)},removeDataAttribute(e,t){e.removeAttribute(`data-mq-${normalizeDataKey(t)}`)},getDataAttributes(e){if(!e)return{};const t={},n=Object.keys(e.dataset).filter((e=>e.startsWith("mq")&&!e.startsWith("mqConfig")));for(const r of n){let n=r.replace(/^mq/,"");n=n.charAt(0).toLowerCase()+n.slice(1,n.length),t[n]=normalizeData(e.dataset[r])}return t},getDataAttribute:(e,t)=>normalizeData(e.getAttribute(`data-mq-${normalizeDataKey(t)}`))};class Config{static get Default(){return{}}static get DefaultType(){return{}}static get NAME(){throw new Error('You have to implement the static method "NAME", for each component!')}_getConfig(e){return e=this._mergeConfigObj(e),e=this._configAfterMerge(e),this._typeCheckConfig(e),e}_configAfterMerge(e){return e}_mergeConfigObj(e,t){const n=isElement(t)?Manipulator.getDataAttribute(t,"config"):{};return{...this.constructor.Default,..."object"==typeof n?n:{},...isElement(t)?Manipulator.getDataAttributes(t):{},..."object"==typeof e?e:{}}}_typeCheckConfig(e,t=this.constructor.DefaultType){for(const r of Object.keys(t)){const s=t[r],i=e[r],o=isElement(i)?"element":null==(n=i)?`${n}`:Object.prototype.toString.call(n).match(/\s([a-z]+)/i)[1].toLowerCase();if(!new RegExp(s).test(o))throw new TypeError(`${this.constructor.NAME.toUpperCase()}: Option "${r}" provided type "${o}" but expected type "${s}".`)}var n}}const VERSION="1.0.3";class BaseComponent extends Config{constructor(e,t){super(),(e=getElement(e))&&(this._element=e,this._config=this._getConfig(t),Data.set(this._element,this.constructor.DATA_KEY,this))}dispose(){Data.remove(this._element,this.constructor.DATA_KEY);for(const e of Object.getOwnPropertyNames(this))this[e]=null}_getConfig(e){return e=this._mergeConfigObj(e,this._element),e=this._configAfterMerge(e),this._typeCheckConfig(e),e}static getInstance(e){return Data.get(getElement(e),this.DATA_KEY)}static getOrCreateInstance(e,t={}){return this.getInstance(e)||new this(e,"object"==typeof t?t:null)}static get VERSION(){return"1.0.3"}static get DATA_KEY(){return`mq.${this.NAME}`}}const NAME="marqueefy",Default={direction:"left",speed:100},DefaultType={direction:"string",speed:"number"};class Marqueefy extends BaseComponent{constructor(e,t){super(e),this._element=e,this._config=this._getConfig(t),this._setListeners(),this.refresh()}static get NAME(){return NAME}static get Default(){return Default}static get DefaultType(){return DefaultType}refresh(){const{direction:e}=this._config,{speed:t}=this._config;this._element.setAttribute("data-mq-direction",e),this._element.setAttribute("data-mq-speed",t);let n=this._element.querySelector(".content").getBoundingClientRect().width;"top"!==e&&"bottom"!==e||(n=this._element.getBoundingClientRect().height,this._element.style.setProperty("--mq-height",n+"px")),this._element.style.setProperty("--mq-animation-duration",n/t+"s")}_setListeners(){window.addEventListener("resize",(()=>this.refresh()),{passive:!0})}}export{Marqueefy};
//# sourceMappingURL=marqueefy.esm.min.js.map